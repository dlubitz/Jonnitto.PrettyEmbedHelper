import{a as p,b as m,e as w}from"./chunk-FQ54N5TY.js";function v(s){s.directive("prettyembedyoutube",(h,{modifiers:l,expression:a},{evaluate:n})=>{let i=l.includes("lightbox")?"lightbox":"inline",c={slim:l.includes("slim"),style:i,...n(a||"{}")};A({element:h,Alpine:s,options:c})})}function A({element:s,Alpine:h,options:l}){let a="YouTube",{videoId:n,playlistId:i,style:u,slim:c}=l,d={playerVars:{autoplay:1,modestbranding:1,playsinline:1,rel:0,showinfo:0,controls:c?0:1}};n&&(d.videoId=n),i&&(i.startsWith("PL")||(i="PL"+i),d.playerVars.listType="playlist",d.playerVars.list=i);let f=window.localStorage,b=`jonnittoprettyembed_gdpr_${a.toLowerCase()}`,P={title:l.title,loaded:!1,playing:!1,lightbox:u==="lightbox"?!1:null,gdpr:l.gdpr&&f.getItem(b)!=="true"?"needCheck":"isAccepted"},t=null;h.bind(s,{":class"(){return this.playing&&m},"x-data"(){return{...P,init(){this.ligtbox!==null&&this.$watch("lightbox",(e,y)=>{!e&&e!==y&&this.pause()})},acceptGdpr(){f.setItem(b,"true"),this.$dispatch("prettyEmbedAcceptGdpr",a),this.load()},play(){t?.playVideo()},pause(){t?.pauseVideo()},load(e){if(e&&e.preventDefault(),this.gdpr!="isAccepted"){this.gdpr="isOpen";return}if(this.lightbox!==null&&(this.lightbox=!0),this.loaded){this.play();return}w(()=>{let y=this.$refs.target||s,g=()=>{let r=t.getVideoUrl(),{title:o,author:x,video_id:E,video_quality:T,list:$}=t.getVideoData();return{type:a,style:u,title:o,author:x,videoUrl:r,videoId:E,quality:T,playlistId:$||null}};t=new YT.Player(y,{...d,events:{onStateChange:({data:r})=>{let o=t.getCurrentTime();if(r===YT.PlayerState.PLAYING){this.$dispatch("prettyEmbedPause",s),this.loaded=!0,this.playing=!0,this.$dispatch(p,{event:"play",currentTime:o,...g()});return}if(r===YT.PlayerState.PAUSED){this.playing=!1,this.$dispatch(p,{event:"pause",currentTime:o,...g()});return}if(r===YT.PlayerState.ENDED){this.playing=!1,this.$dispatch(p,{event:"finished",currentTime:o,...g()});return}}}})})},reset(){t&&(t?.stopVideo(),t.destroy(),t=null,this.loaded=!1,this.playing=!1)}}},"@prettyEmbedAcceptGdpr.window"({detail:e}){e==a&&(this.gdpr="isAccepted")},"@prettyEmbedReset.window"(){this.reset()},"@prettyEmbedPause.window"({detail:e}){e!=this.$root&&this.pause()}})}window.addEventListener("alpine:init",()=>{window.Alpine.plugin(v)});
