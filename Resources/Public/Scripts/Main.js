/*!
 * Jonnitto.PrettyEmbedHelper - created by Jon Uhlmann
 * @link https://github.com/jonnitto/Jonnitto.PrettyEmbedHelper
 */
!function(){"use strict";var t="jonnitto-prettyembed",e="".concat(t,"--init"),n="".concat(t,"--play"),o="".concat(t,"--slim"),c=document.querySelectorAll(".".concat(t,"--video video:not([autoplay])"));function i(t){var c=t.parentNode.classList;c.contains(e)||(t.hasAttribute("data-controls")&&t.setAttribute("controls",!0),t.hasAttribute("controls")||(c.add(o),t.addEventListener("click",(function(){var e=!c.contains(n);c[e?"add":"remove"](n),e?t.play():t.pause()}))),c.add(e),c.add(n),setTimeout((function(){t.play()}),0))}function a(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=0;o<t.length;o++){var i=c[o];i!=e&&(i.hasAttribute("controls")||i.parentNode.classList.remove(n),i.pause())}}for(var r=0;r<c.length;r++)c[r].addEventListener("play",(function(t){a(c,t.target)}));function u(t,e){document.documentElement.addEventListener("click",(function(n){var o=n.target.closest(t);o&&"function"==typeof e&&e.call(o,n)}))}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}u(".jonnitto-prettyembed--video.jonnitto-prettyembed--inline video",(function(t){t.preventDefault(),i(this)}));var d=document.documentElement,f=document.body,s="jonnitto-prettyembed",p="".concat(s,"__lightbox"),m=p,v="-".concat(p),y=d.classList,b="".concat(s,"__inner"),g="".concat(s,"__close"),h="".concat(s,"__content"),L=!1,T=document.createElement("div"),E=null;function A(){L.className="".concat(s," ").concat(h),L.innerHTML=""}function w(t,e){return L||(f.appendChild(T),L=document.getElementById(m)),A(),"object"!=l(t)&&(t=t?[t]:[]),t.forEach((function(t){L.classList.add("".concat(s,"--").concat(t))})),e&&(L.style.paddingTop=e),L}function j(t){clearTimeout(E),E=setTimeout((function(){"function"==typeof t&&t(),y.add(v)}),100)}function S(){y.remove(v),L&&(clearTimeout(E),E=setTimeout(A,300))}function _(t,e){"function"==typeof e&&"string"==typeof t&&u(t,e)}T.className=p,T.innerHTML='\n<div class="'.concat(b,'">\n    <button type="button" class="').concat(g,'">&times;</button>\n    <div id="').concat(m,'" class="').concat(s," ").concat(h,'"></div>\n</div>'),u(".".concat(h),(function(t){t.stopPropagation()})),u(".".concat(p),S),u(".".concat(g),S),d.addEventListener("keyup",(function(t){27==t.keyCode&&y.contains(v)&&S()}));var q;function H(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0,n=!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(window.navigator.userAgent);return!!(!n&&!t||n&&t)&&("function"==typeof e&&e(),!0)}_(".".concat("jonnitto-prettyembed","--video.").concat("jonnitto-prettyembed","--lightbox video"),(function(t){t.preventDefault(),clearTimeout(q),a();var e=w("video").appendChild(this.cloneNode(!0));j((function(){i(e)})),q=setTimeout((function(){e.play()}),500)}));var x="jonnitto-prettyembed";function N(t){var e=t.dataset,n=null!=e.fs;return!!e.embed&&'<iframe src="'.concat(e.embed,'" ').concat(n?"allowfullscreen ":"",'frameborder="0" allow="').concat(n?"fullscreen; ":"",'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe>')}function M(t){var e=t.querySelector("img");return{node:e||null,src:e?e.getAttribute("src"):null}}function k(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"56.25%",n=M(t);if(!n.node)return e;var o=parseInt(n.node.naturalHeight)/parseInt(n.node.naturalWidth)*100;return"number"!=typeof o?e:o+"%"}function C(t,e){var n=N(t),o=M(t);if(n&&o.src){var c=function(t,e){if("object"===l(t)&&"string"==typeof e){var n=t,o=n.tagName,c=new RegExp("^<"+o,"i"),i=new RegExp(o+">$","i"),a="<"+e,r=e+">",u=document.createElement("div");u.innerHTML=n.outerHTML.replace(c,a).replace(i,r);var d=u.firstChild;return t.parentNode.replaceChild(d,t),d}}(t,"div");c.setAttribute("data-img",o.src),c.classList.add(e),c.style.paddingTop=k(t),c.innerHTML=n}}function D(t,e,n){H(!1,(function(){n||(n=document.querySelectorAll(t));for(var o=n.length-1;o>=0;o--)C(n[o],e)}))}function P(t){_("a.".concat(x,"--").concat(t,".").concat(x,"--lightbox"),(function(e){var n=N(this);if(n){var o=k(this);e.preventDefault(),w([t,"iframe"],o).innerHTML=n,j()}}))}function B(t){var e="a.".concat(x,"--").concat(t,".").concat(x,"--inline"),n="".concat(x,"--play");window.addEventListener("load",(function(){D(e,n)})),u(e,(function(t){t.preventDefault(),C(this,n)}))}function I(t){var e=t.getAttribute("src");t.naturalHeight<=90&&t.naturalWidth<=120&&-1==e.indexOf("/default.jpg")&&(e=e.replace("mqdefault","default").replace("hqdefault","mqdefault").replace("sddefault","hqdefault").replace("maxresdefault","sddefault"),t.setAttribute("src",e),setTimeout((function(){t.onload=function(){I(t)}}),10),setTimeout((function(){I(t)}),5e3))}function O(t){H(!0,(function(){void 0===t&&(t=document.querySelectorAll("img.jonnitto-prettyembed__youtube-preview"));for(var e=t.length-1;e>=0;e--)I(t[e])}))}B("vimeo"),P("vimeo"),B("youtube"),P("youtube"),window.addEventListener("load",(function(){O()}))}();

//# sourceMappingURL=Main.js.map
