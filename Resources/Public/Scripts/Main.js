/*!
 * Jonnitto.PrettyEmbedHelper - created by Jon Uhlmann
 * @link https://github.com/jonnitto/PrettyEmbedHelper
 */
!function(){"use strict";var e,t=(function(e){!function(){var t,n=0,o=0,i={},r={};function c(e,o,i){return"_root"==o?i:e!==i?function(e){return t||(t=e.matches?e.matches:e.webkitMatchesSelector?e.webkitMatchesSelector:e.mozMatchesSelector?e.mozMatchesSelector:e.msMatchesSelector?e.msMatchesSelector:e.oMatchesSelector?e.oMatchesSelector:d.matchesSelector)}(e).call(e,o)?e:e.parentNode?(n++,c(e.parentNode,o,i)):void 0:void 0}function l(e,t,n,o){i[e.id]||(i[e.id]={}),i[e.id][t]||(i[e.id][t]={}),i[e.id][t][n]||(i[e.id][t][n]=[]),i[e.id][t][n].push(o)}function a(e,t,n,o){if(i[e.id])if(t)if(o||n)if(o){if(i[e.id][t][n])for(var r=0;r<i[e.id][t][n].length;r++)if(i[e.id][t][n][r]===o){i[e.id][t][n].splice(r,1);break}}else delete i[e.id][t][n];else i[e.id][t]={};else for(var c in i[e.id])i[e.id].hasOwnProperty(c)&&(i[e.id][c]={})}function u(e,t,o,u){if(this.element){e instanceof Array||(e=[e]),o||"function"!=typeof t||(o=t,t="_root");var s,f=this.id;for(s=0;s<e.length;s++)u?a(this,e[s],t,o):(i[f]&&i[f][e[s]]||d.addEvent(this,e[s],p(e[s])),l(this,e[s],t,o));return this}function p(e){return function(t){!function(e,t,o){if(i[e][o]){var l,a,u=t.target||t.srcElement,s={},f=0,p=0;for(l in n=0,i[e][o])i[e][o].hasOwnProperty(l)&&(a=c(u,l,r[e].element))&&d.matchesEvent(o,r[e].element,a,"_root"==l,t)&&(n++,i[e][o][l].match=a,s[n]=i[e][o][l]);for(t.stopPropagation=function(){t.cancelBubble=!0},f=0;f<=n;f++)if(s[f])for(p=0;p<s[f].length;p++){if(!1===s[f][p].call(s[f].match,t))return void d.cancel(t);if(t.cancelBubble)return}}}(f,t,e)}}}function d(e,t){if(!(this instanceof d)){for(var n in r)if(r[n].element===e)return r[n];return r[++o]=new d(e,o),r[o]}this.element=e,this.id=t}d.prototype.on=function(e,t,n){return u.call(this,e,t,n)},d.prototype.off=function(e,t,n){return u.call(this,e,t,n,!0)},d.matchesSelector=function(){},d.cancel=function(e){e.preventDefault(),e.stopPropagation()},d.addEvent=function(e,t,n){var o="blur"==t||"focus"==t;e.element.addEventListener(t,n,o)},d.matchesEvent=function(){return!0},e.exports&&(e.exports=d),window.Gator=d}()}(e={exports:{}},e.exports),e.exports);const n="jonnitto-prettyembed",o=`${n}--init`,i=`${n}--play`,r=`${n}--slim`,c=document.querySelectorAll(`.${n}--video video:not([autoplay])`);function l(e){let n=e.parentNode.classList;n.contains(o)||(e.hasAttribute("data-controls")&&e.setAttribute("controls",!0),e.hasAttribute("controls")||(n.add(r),t(e).on("click",()=>{let t=!n.contains(i);n[t?"add":"remove"](i),t?e.play():e.pause()})),n.add(o),n.add(i),setTimeout(()=>{e.play()},0))}function a(e=c,t=null){for(let n=0;n<e.length;n++){const e=c[n];e!=t&&(e.hasAttribute("controls")||e.parentNode.classList.remove(i),e.pause())}}for(let e=0;e<c.length;e++)t(c[e]).on("play",function(){a(c,this)});t(document.documentElement).on("click",".jonnitto-prettyembed--video.jonnitto-prettyembed--inline video",function(e){e.preventDefault(),l(this)});const u=document.documentElement,d=document.body,s="jonnitto-prettyembed",f=`${s}__lightbox`,p=f,m=`-${f}`,h=u.classList,y=`${s}__inner`,v=`${s}__close`,b=`${s}__content`;let g=!1,$=document.createElement("div"),w=null;function T(){g.className=`${s} ${b}`,g.innerHTML=""}function E(e,t){return g||(d.appendChild($),g=document.getElementById(p)),T(),"object"!=typeof e&&(e=e?[e]:[]),e.forEach(e=>{g.classList.add(`${s}--${e}`)}),t&&(g.style.paddingTop=t),g}function S(e){clearTimeout(w),w=setTimeout(function(){"function"==typeof e&&e(),h.add(m)},100)}function A(){h.remove(m),g&&(clearTimeout(w),w=setTimeout(T,300))}function M(e,n){"function"==typeof n&&"string"==typeof e&&t(u).on("click",e,n)}$.className=f,$.innerHTML=`\n<div class="${y}">\n    <button type="button" class="${v}">&times;</button>\n    <div id="${p}" class="${s} ${b}"></div>\n</div>`,t(u).on("click",`.${b}`,e=>{e.stopPropagation()}),t(u).on("click",`.${f},.${v}`,A),t(u).on("keyup",function(e){27==e.keyCode&&h.contains(m)&&A()});let _;function k(e=!0,t){const n=!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(window.navigator.userAgent);return!!(!n&&!e||n&&e)&&("function"==typeof t&&t(),!0)}M(".jonnitto-prettyembed--video.jonnitto-prettyembed--lightbox video",function(e){e.preventDefault(),clearTimeout(_),a();let t=E("video").appendChild(this.cloneNode(!0));S(()=>{l(t)}),_=setTimeout(function(){t.play()},500)});const x="jonnitto-prettyembed";function L(e){let t=e.dataset,n=null!=t.fs;return!!t.embed&&`<iframe src="${t.embed}" ${n?"allowfullscreen ":""}frameborder="0" allow="${n?"fullscreen; ":""}accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe>`}function j(e){let t=e.querySelector("img");return{node:t||null,src:t?t.getAttribute("src"):null}}function N(e,t="56.25%"){let n=j(e);if(!n.node)return t;let o=parseInt(n.node.naturalHeight)/parseInt(n.node.naturalWidth)*100;return"number"!=typeof o?t:o+"%"}function q(e,t){let n=L(e),o=j(e);if(n&&o.src){let i=function(e,t){if("object"==typeof e&&"string"==typeof t){let n=e,o=n.tagName,i=new RegExp("^<"+o,"i"),r=new RegExp(o+">$","i"),c="<"+t,l=t+">",a=document.createElement("div");a.innerHTML=n.outerHTML.replace(i,c).replace(r,l);let u=a.firstChild;return e.parentNode.replaceChild(u,e),u}}(e,"div");i.setAttribute("data-img",o.src),i.classList.add(t),i.style.paddingTop=N(e),i.innerHTML=n}}function H(e,t){k(!1,()=>{t||(t=document.querySelectorAll(e));for(let e=t.length-1;e>=0;e--)q(t[e])})}function P(e){M(`a.${x}--${e}.${x}--lightbox`,function(t){let n=L(this);if(n){let o=N(this);t.preventDefault(),E([e,"iframe"],o).innerHTML=n,S()}})}function B(e){const n=`a.${x}--${e}.${x}--inline`,o=`${x}--play`;t(window).on("load",function(){H(n)}),t(document.documentElement).on("click",n,function(e){e.preventDefault(),q(this,o)})}function C(e){let t=e.getAttribute("src");e.naturalHeight<=90&&e.naturalWidth<=120&&-1==t.indexOf("/default.jpg")&&(t=t.replace("mqdefault","default").replace("hqdefault","mqdefault").replace("sddefault","hqdefault").replace("maxresdefault","sddefault"),e.setAttribute("src",t),setTimeout(()=>{e.onload=()=>{C(e)}},10),setTimeout(()=>{C(e)},5e3))}function D(e){k(!0,()=>{void 0===e&&(e=document.querySelectorAll("img.jonnitto-prettyembed__youtube-preview"));for(let t=e.length-1;t>=0;t--)C(e[t])})}B("vimeo"),P("vimeo"),B("youtube"),P("youtube"),t(window).on("load",()=>{D()})}();

//# sourceMappingURL=Main.js.map
