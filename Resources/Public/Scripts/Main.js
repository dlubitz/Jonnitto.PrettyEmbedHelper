/*!
 * Jonnitto.PrettyEmbedHelper - created by Jon Uhlmann
 * @link https://github.com/jonnitto/Jonnitto.PrettyEmbedHelper
 * Copyright 2019-2021 Jon Uhlmann
 * Licensed under GPL-3.0-or-later
 */
!function(){"use strict";var t="jonnitto-prettyembed",e="".concat(t,"--init"),n="".concat(t,"--slim"),o="".concat(t,"--play"),a=Array.from(document.querySelectorAll(".".concat(t,"--video video:not([autoplay])"))),c=Array.from(document.querySelectorAll(".".concat(t,"--audio audio:not([autoplay])"))),r=[].concat(a,c);function i(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=t.parentNode.classList;c.contains(e)||(t.hasAttribute("data-controls")&&t.setAttribute("controls",!0),t.hasAttribute("controls")||(c.add(n),t.addEventListener("click",(function(){var e=!c.contains(o);c[e?"add":"remove"](o),e?t.play():t.pause()}))),c.add(e),a&&(c.add(o),setTimeout((function(){t.play()}),0)))}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.forEach((function(t){t!=e&&(t.hasAttribute("controls")||t.parentNode.classList.remove(o),t.pause())}))}function l(t){var e;t||(t={}),window.CustomEvent?e=new CustomEvent("prettyembed",{detail:t}):(e=document.createEvent("CustomEvent")).initCustomEvent("prettyembed",!0,!0,t),document.dispatchEvent(e)}r.forEach((function(t){t.addEventListener("play",(function(t){u(r,t.target)}))})),console.log(l);var d=document.querySelectorAll(".jonnitto-prettyembed--audio audio");function s(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}function f(t,e){document.documentElement.addEventListener("click",(function(n){var o=function(t,e){var n=t;do{if(s(n,e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null}(n.target,t);o&&"function"==typeof e&&e.call(o,n)}))}Array.from(d).forEach((function(t){var e;i(t,!1),l({type:"audio",style:"inline",src:(e=t.querySelector("source"),e?e.src:null)})}));function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}f(".jonnitto-prettyembed--video.jonnitto-prettyembed--inline video",(function(t){var e,n=this;t.preventDefault(),i(this),l({type:"video",style:"inline",src:(e=n.querySelector("source"),e?e.src:null)})}));var p=document.documentElement,v=document.body,y="jonnitto-prettyembed",b="".concat(y,"__lightbox"),h=b,g="-".concat(b),E=p.classList,L="".concat(y,"__inner"),A="".concat(y,"__close"),S="".concat(y,"__content"),T=document.createElement("div");T.className=b,T.innerHTML='\n<div class="'.concat(L,'">\n    <button type="button" class="').concat(A,'">&times;</button>\n    <div id="').concat(h,'" class="').concat(y," ").concat(S,'"></div>\n</div>');var w=!1,q=null;function _(){w.className="".concat(y," ").concat(S),w.removeAttribute("style"),w.innerHTML=""}function j(t,e){return w||(v.appendChild(T),w=document.getElementById(h)),_(),"object"!=m(t)&&(t=t?[t]:[]),t.forEach((function(t){w.classList.add("".concat(y,"--").concat(t))})),e&&(w.style.paddingTop=e),w}function N(t){clearTimeout(q),q=setTimeout((function(){"function"==typeof t&&t(),E.add(g)}),100)}function C(){E.remove(g),w&&(clearTimeout(q),q=setTimeout(_,300))}function M(t,e){"function"==typeof e&&"string"==typeof t&&f(t,e)}f(".".concat(S),(function(t){t.stopImmediatePropagation()})),f(".".concat(b),C),f(".".concat(A),C),p.addEventListener("keyup",(function(t){27==t.keyCode&&E.contains(g)&&C()}));var x,H="jonnitto-prettyembed";M(".".concat(H,"--video.").concat(H,"--lightbox video"),(function(t){var e=this;t.preventDefault(),clearTimeout(x),u();var n=j("video",!1).appendChild(this.cloneNode(!0));null==this.dataset.controls&&Array.from(this.parentNode.children).forEach((function(t){t==e||t.classList.contains("".concat(H,"__preview"))||n.parentNode.appendChild(t.cloneNode(!0))})),N((function(){var t;i(n),e.dataset.init||(e.dataset.init=!0,l({type:"video",style:"lightbox",src:(t=e.querySelector("source"),t?t.src:null)}))})),x=setTimeout((function(){n.play()}),500)}));var k="jonnitto-prettyembed";function D(t){var e=t.dataset,n=null!=e.fs;return!!e.embed&&'<iframe src="'.concat(e.embed,'" ').concat(n?"allowfullscreen ":"",'frameborder="0" allow="').concat(n?"fullscreen; ":"",'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe>')}function I(t){var e=t.querySelector("img");return{node:e||null,src:e?e.getAttribute("src"):null}}function R(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"56.25%";if(t.dataset.ratio)return t.dataset.ratio;var n=I(t);if(!n.node)return e;var o=parseInt(n.node.naturalHeight)/parseInt(n.node.naturalWidth)*100;return"number"!=typeof o?e:o+"%"}function W(t,e,n){if(z(t)){var o=D(t),a=I(t);if(!o)return;var c=function(t,e){if("object"===m(t)&&"string"==typeof e){var n=t,o=n.tagName,a=new RegExp("^<"+o,"i"),c=new RegExp(o+">$","i"),r="<"+e,i=e+">",u=document.createElement("div");u.innerHTML=n.outerHTML.replace(a,r).replace(c,i);var l=u.firstChild;return t.parentNode.replaceChild(l,t),l}}(t,"div");c.classList.add(e),c.style.paddingTop=R(t),c.innerHTML=o,a.src&&c.setAttribute("data-img",a.src),l({type:n,style:"inline",title:t.ariaLabel,src:t.dataset.embed})}}function z(t){var e=t.dataset.gdpr;return!e||!(!e||!confirm(e))&&(t.removeAttribute("data-gdpr"),!0)}function B(t){M("a.".concat(k,"--").concat(t,".").concat(k,"--lightbox"),(function(e){var n=this,o=D(this);if(o&&(e.preventDefault(),z(this))){var a=R(this);j([t,"iframe"],a).innerHTML=o,N((function(){n.dataset.init||(n.dataset.init=!0,l({type:t,style:"lightbox",title:n.ariaLabel,src:n.dataset.embed}))}))}}))}function O(t){var e="a.".concat(k,"--").concat(t,".").concat(k,"--inline"),n="".concat(k,"--play");f(e,(function(e){e.preventDefault(),W(this,n,t)}))}function P(t){var e=t.getAttribute("src");t.naturalHeight<=90&&t.naturalWidth<=120&&-1==e.indexOf("/default.jpg")&&(e=e.replace("mqdefault","default").replace("hqdefault","mqdefault").replace("sddefault","hqdefault").replace("maxresdefault","sddefault"),t.setAttribute("src",e),setTimeout((function(){t.onload=function(){P(t)}}),10),setTimeout((function(){P(t)}),5e3))}O("vimeo"),B("vimeo"),O("youtube"),B("youtube"),window.addEventListener("load",(function(){!function(t){void 0===t&&(t=document.querySelectorAll("img.jonnitto-prettyembed__youtube-preview"));for(var e=t.length-1;e>=0;e--)P(t[e])}()}))}();
//# sourceMappingURL=Main.js.map
