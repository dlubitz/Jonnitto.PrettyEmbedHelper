/*!
 * Jonnitto.PrettyEmbedHelper - created by Jon Uhlmann
 * @link https://github.com/jonnitto/Jonnitto.PrettyEmbedHelper
 * Copyright 2019-2020 Jon Uhlmann
 * Licensed under GPL-3.0-or-later
 */
!function(){"use strict";var t="jonnitto-prettyembed",e="".concat(t,"--init"),n="".concat(t,"--slim"),o="".concat(t,"--play"),c=Array.from(document.querySelectorAll(".".concat(t,"--video video:not([autoplay])"))),a=Array.from(document.querySelectorAll(".".concat(t,"--audio audio:not([autoplay])"))),i=[].concat(c,a);function r(t){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=t.parentNode.classList;a.contains(e)||(t.hasAttribute("data-controls")&&t.setAttribute("controls",!0),t.hasAttribute("controls")||(a.add(n),t.addEventListener("click",(function(){var e=!a.contains(o);a[e?"add":"remove"](o),e?t.play():t.pause()}))),a.add(e),c&&(a.add(o),setTimeout((function(){t.play()}),0)))}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.forEach((function(t){t!=e&&(t.hasAttribute("controls")||t.parentNode.classList.remove(o),t.pause())}))}i.forEach((function(t){t.addEventListener("play",(function(t){u(i,t.target)}))}));var l=document.querySelectorAll(".jonnitto-prettyembed--audio audio");function d(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}function s(t,e){document.documentElement.addEventListener("click",(function(n){var o=function(t,e){var n=t;do{if(d(n,e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null}(n.target,t);o&&"function"==typeof e&&e.call(o,n)}))}Array.from(l).forEach((function(t){r(t,!1)}));function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}s(".jonnitto-prettyembed--video.jonnitto-prettyembed--inline video",(function(t){t.preventDefault(),r(this)}));var m=document.documentElement,p=document.body,v="jonnitto-prettyembed",y="".concat(v,"__lightbox"),h=y,b="-".concat(y),g=m.classList,A="".concat(v,"__inner"),E="".concat(v,"__close"),L="".concat(v,"__content"),T=document.createElement("div");T.className=y,T.innerHTML='\n<div class="'.concat(A,'">\n    <button type="button" class="').concat(E,'">&times;</button>\n    <div id="').concat(h,'" class="').concat(v," ").concat(L,'"></div>\n</div>');var S=!1,w=null;function j(){S.className="".concat(v," ").concat(L),S.removeAttribute("style"),S.innerHTML=""}function _(t,e){return S||(p.appendChild(T),S=document.getElementById(h)),j(),"object"!=f(t)&&(t=t?[t]:[]),t.forEach((function(t){S.classList.add("".concat(v,"--").concat(t))})),e&&(S.style.paddingTop=e),S}function N(t){clearTimeout(w),w=setTimeout((function(){"function"==typeof t&&t(),g.add(b)}),100)}function q(){g.remove(b),S&&(clearTimeout(w),w=setTimeout(j,300))}function M(t,e){"function"==typeof e&&"string"==typeof t&&s(t,e)}s(".".concat(L),(function(t){t.stopImmediatePropagation()})),s(".".concat(y),q),s(".".concat(E),q),m.addEventListener("keyup",(function(t){27==t.keyCode&&g.contains(b)&&q()}));var H;function x(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0,n=!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(window.navigator.userAgent);return!!(!n&&!t||n&&t)&&("function"==typeof e&&e(),!0)}M(".".concat("jonnitto-prettyembed","--video.").concat("jonnitto-prettyembed","--lightbox video"),(function(t){var e=this;t.preventDefault(),clearTimeout(H),u();var n=_("video",!1).appendChild(this.cloneNode(!0));null==this.dataset.controls&&Array.from(this.parentNode.children).forEach((function(t){t==e||t.classList.contains("".concat("jonnitto-prettyembed","__preview"))||n.parentNode.appendChild(t.cloneNode(!0))})),N((function(){r(n)})),H=setTimeout((function(){n.play()}),500)}));var k="jonnitto-prettyembed";function C(t){var e=t.dataset,n=null!=e.fs;return!!e.embed&&'<iframe src="'.concat(e.embed,'" ').concat(n?"allowfullscreen ":"",'frameborder="0" allow="').concat(n?"fullscreen; ":"",'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe>')}function D(t){var e=t.querySelector("img");return{node:e||null,src:e?e.getAttribute("src"):null}}function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"56.25%";if(t.dataset.ratio)return t.dataset.ratio;var n=D(t);if(!n.node)return e;var o=parseInt(n.node.naturalHeight)/parseInt(n.node.naturalWidth)*100;return"number"!=typeof o?e:o+"%"}function P(t,e){var n=C(t),o=D(t);if(n&&o.src){var c=function(t,e){if("object"===f(t)&&"string"==typeof e){var n=t,o=n.tagName,c=new RegExp("^<"+o,"i"),a=new RegExp(o+">$","i"),i="<"+e,r=e+">",u=document.createElement("div");u.innerHTML=n.outerHTML.replace(c,i).replace(a,r);var l=u.firstChild;return t.parentNode.replaceChild(l,t),l}}(t,"div");c.setAttribute("data-img",o.src),c.classList.add(e),c.style.paddingTop=I(t),c.innerHTML=n}}function B(t,e,n){x(!1,(function(){n||(n=document.querySelectorAll(t));for(var o=n.length-1;o>=0;o--)P(n[o],e)}))}function O(t){M("a.".concat(k,"--").concat(t,".").concat(k,"--lightbox"),(function(e){var n=C(this);if(n){var o=I(this);e.preventDefault(),_([t,"iframe"],o).innerHTML=n,N()}}))}function R(t){var e="a.".concat(k,"--").concat(t,".").concat(k,"--inline"),n="".concat(k,"--play");window.addEventListener("load",(function(){B(e,n)})),s(e,(function(t){t.preventDefault(),P(this,n)}))}function W(t){var e=t.getAttribute("src");t.naturalHeight<=90&&t.naturalWidth<=120&&-1==e.indexOf("/default.jpg")&&(e=e.replace("mqdefault","default").replace("hqdefault","mqdefault").replace("sddefault","hqdefault").replace("maxresdefault","sddefault"),t.setAttribute("src",e),setTimeout((function(){t.onload=function(){W(t)}}),10),setTimeout((function(){W(t)}),5e3))}function z(t){x(!0,(function(){void 0===t&&(t=document.querySelectorAll("img.jonnitto-prettyembed__youtube-preview"));for(var e=t.length-1;e>=0;e--)W(t[e])}))}R("vimeo"),O("vimeo"),R("youtube"),O("youtube"),window.addEventListener("load",(function(){z()}))}();
//# sourceMappingURL=Main.js.map
