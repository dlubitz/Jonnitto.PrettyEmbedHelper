{"version":3,"sources":["Resources/Private/Assets/Video/Init.js","Resources/Private/Assets/Helper/addEvent.js","Resources/Private/Assets/Video/Embed.js","Resources/Private/Assets/Helper/Lightbox.js","Resources/Private/Assets/Video/Lightbox.js","Resources/Private/Assets/Helper/checkAgent.js","Resources/Private/Assets/Helper/iFrame.js","Resources/Private/Assets/Youtube/Preview.js","Resources/Private/Assets/Vimeo/Embed.js","Resources/Private/Assets/Vimeo/Lightbox.js","Resources/Private/Assets/Youtube/Embed.js","Resources/Private/Assets/Youtube/Lightbox.js"],"names":["BASE_CLASS","INIT_CLASS","PLAY_CLASS","SLIM_CLASS","VIDEOS","document","querySelectorAll","init","video","classList","parentNode","contains","hasAttribute","setAttribute","add","addEventListener","play","pause","setTimeout","videos","current","index","length","remove","event","target","selector","callback","documentElement","element","closest","call","addEvent","preventDefault","this","HTML_ELEMENT","BODY_ELEMENT","body","LIGHTBOX_CLASS","ID","VISIBLE_CLASS","VISIBLE_CLASS_LIST","INNER_CLASS","CLOSE_CLASS","CONTENT_CLASS","lighboxContent","lighbox","createElement","timeout","resetContent","className","innerHTML","get","type","paddingTop","appendChild","getElementById","_typeof","forEach","item","style","show","clearTimeout","closeLighbox","stopPropagation","keyCode","check","autoplay","HAS_AUTOPLAY","test","window","navigator","userAgent","videoNode","lightbox","cloneNode","BASE","markup","node","data","dataset","fullscreen","fs","embed","getImage","image","querySelector","src","getAttribute","getPaddingTop","fallback","ratio","parseInt","naturalHeight","naturalWidth","write","link","playClass","iframe","tagName","originalElement","originalTag","startRX","RegExp","endRX","startSubst","endSubst","wrapper","outerHTML","replace","newElement","firstChild","replaceChild","links","i","lightboxHelper","html","SELECTOR","fixPreview","img","indexOf","onload","fixPreviews","images"],"mappings":";;;;yBAAA,IAAMA,EAAa,uBACbC,YAAgBD,YAChBE,YAAgBF,YAChBG,YAAgBH,YAChBI,EAASC,SAASC,4BAChBN,oCAGR,SAASO,EAAKC,OACNC,EAAYD,EAAME,WAAWD,UAC7BA,EAAUE,SAASV,KAInBO,EAAMI,aAAa,kBACnBJ,EAAMK,aAAa,YAAY,GAG9BL,EAAMI,aAAa,cACpBH,EAAUK,IAAIX,GACdK,EAAMO,iBAAiB,SAAS,eACxBC,GAAQP,EAAUE,SAAST,GAC/BO,EAAUO,EAAO,MAAQ,UAAUd,GAC/Bc,EACAR,EAAMQ,OAENR,EAAMS,YAKlBR,EAAUK,IAAIb,GACdQ,EAAUK,IAAIZ,GACdgB,YAAW,WACPV,EAAMQ,SACP,IAGP,SAASC,YAAME,yDAASf,EAAQgB,yDAAU,KAC7BC,EAAQ,EAAGA,EAAQF,EAAOG,OAAQD,IAAS,KAC1Cb,EAAQJ,EAAOiB,GACjBb,GAASY,IACJZ,EAAMI,aAAa,aACpBJ,EAAME,WAAWD,UAAUc,OAAOrB,GAEtCM,EAAMS,UAKlB,IAAK,IAAII,EAAQ,EAAGA,EAAQjB,EAAOkB,OAAQD,IACvCjB,EAAOiB,GAAON,iBAAiB,QAAQ,SAAAS,GACnCP,EAAMb,EAAQoB,EAAMC,WCpDb,WAASC,EAAUC,GAC9BtB,SAASuB,gBAAgBb,iBAAiB,SAAS,SAAAS,OAC3CK,EAAUL,EAAMC,OAAOK,QAAQJ,GAC9BG,GAA8B,mBAAZF,GAGvBA,EAASI,KAAKF,EAASL,2OCA/BQ,EAFI,mEAEe,SAASR,GACxBA,EAAMS,iBACN1B,EAAK2B,SCNT,IAAMC,EAAe9B,SAASuB,gBACxBQ,EAAe/B,SAASgC,KACxBrC,EAAa,uBACbsC,YAAoBtC,gBACpBuC,EAAKD,EACLE,aAAoBF,GACpBG,EAAqBN,EAAa1B,UAClCiC,YAAiB1C,aACjB2C,YAAiB3C,aACjB4C,YAAmB5C,eAErB6C,GAAiB,EACjBC,EAAUzC,SAAS0C,cAAc,OACjCC,EAAU,KASd,SAASC,IAELJ,EAAeK,oBAAelD,cAAc4C,GAE5CC,EAAeM,UAAY,GAG/B,SAASC,EAAIC,EAAMC,UACVT,IACDT,EAAamB,YAAYT,GACzBD,EAAiBxC,SAASmD,eAAejB,IAE7CU,IACmB,UAAfQ,EAAOJ,KACPA,EAAOA,EAAO,CAACA,GAAQ,IAE3BA,EAAKK,SAAQ,SAAAC,GACTd,EAAepC,UAAUK,cAAOd,eAAe2D,OAG/CL,IACAT,EAAee,MAAMN,WAAaA,GAE/BT,EAGX,SAASgB,EAAKlC,GACVmC,aAAad,GACbA,EAAU9B,YAAW,WACM,mBAAZS,GACPA,IAEJc,EAAmB3B,IAAI0B,KACxB,KAGP,SAASuB,IACLtB,EAAmBlB,OAAOiB,GACtBK,IACAiB,aAAad,GACbA,EAAU9B,WAAW+B,EAAc,MAY3C,SAAS1C,EAAKmB,EAAUC,GACG,mBAAZA,GAA6C,iBAAZD,GACxCM,EAASN,EAAUC,GA7D3BmB,EAAQI,UAAYZ,EACpBQ,EAAQK,kCACMT,kDACqBC,8CACpBJ,sBAAcvC,cAAc4C,sBA8D3CZ,aAAaY,IAAiB,SAAApB,GAC1BA,EAAMwC,qBAIVhC,aAAaM,GAAkByB,GAC/B/B,aAAaW,GAAeoB,GAG5B5B,EAAapB,iBAAiB,SAxB9B,SAA2BS,GACF,IAAjBA,EAAMyC,SACFxB,EAAmB9B,SAAS6B,IAC5BuB,OCpEZ,IAEIf,ECLJ,SAASkB,QAAMC,6DAAiBxC,yCACtByC,GAAgB,6CAA6CC,KAC/DC,OAAOC,UAAUC,qBAEfJ,IAAiBD,GAAcC,GAAgBD,KAC1B,mBAAZxC,GACPA,KAEG,gBDLI,0CAAA,4CAIW,SAASH,GACnCA,EAAMS,iBACN6B,aAAad,GACbxC,QACIiE,EAAYC,EAAa,SAASnB,YAAYrB,KAAKyC,WAAU,IACjED,GAAc,WACVlE,EAAWiE,MAEfzB,EAAU9B,YAAW,WAEjBuD,EAAUzD,SACX,QEdP,IAAM4D,EAAO,uBAEb,SAASC,EAAOC,OACRC,EAAOD,EAAKE,QACZC,EAAwB,MAAXF,EAAKG,WACjBH,EAAKI,8BAIaJ,EAAKI,mBACxBF,EAAa,mBAAqB,qCAElCA,EAAa,eAAiB,yFAsBtC,SAASG,EAASN,OACVO,EAAQP,EAAKQ,cAAc,aACxB,CACHR,KAAMO,GAAS,KACfE,IAAKF,EAAQA,EAAMG,aAAa,OAAS,MAIjD,SAASC,EAAcX,OAAMY,yDAAW,SAEhCL,EAAQD,EAASN,OAChBO,EAAMP,YACAY,MAEPC,EACCC,SAASP,EAAMP,KAAKe,eACjBD,SAASP,EAAMP,KAAKgB,cACxB,UACgB,iBAATH,EACAD,EAEJC,EAAQ,IAGnB,SAASI,EAAMC,EAAMC,OACbC,EAASrB,EAAOmB,GAChBX,EAAQD,EAASY,MACjBE,GAAUb,EAAME,IAAK,KACjB1D,EA9CZ,SAAiBA,EAASsE,MACC,WAAnB1C,EAAO5B,IAA2C,iBAAZsE,EAAsB,KACxDC,EAAkBvE,EAClBwE,EAAcD,EAAgBD,QAC9BG,EAAU,IAAIC,OAAO,KAAOF,EAAa,KACzCG,EAAQ,IAAID,OAAOF,EAAc,KAAM,KACvCI,EAAa,IAAMN,EACnBO,EAAWP,EAAU,IACrBQ,EAAUtG,SAAS0C,cAAc,OACrC4D,EAAQxD,UAAYiD,EAAgBQ,UAC/BC,QAAQP,EAASG,GACjBI,QAAQL,EAAOE,OAChBI,EAAaH,EAAQI,kBACzBlF,EAAQnB,WAAWsG,aAAaF,EAAYjF,GACrCiF,GAgCOD,CAAQb,EAAM,OAC5BnE,EAAQhB,aAAa,WAAYwE,EAAME,KACvC1D,EAAQpB,UAAUK,IAAImF,GACtBpE,EAAQ+B,MAAMN,WAAamC,EAAcO,GACzCnE,EAAQsB,UAAY+C,GAc5B,SAAS3F,EAAKmB,EAAUuE,EAAWgB,GDlE/B/C,GAAM,GCmEK,WACF+C,IACDA,EAAQ5G,SAASC,iBAAiBoB,QAEjC,IAAIwF,EAAID,EAAM3F,OAAS,EAAG4F,GAAK,EAAGA,IACnCnB,EAAMkB,EAAMC,GAAIjB,MAK5B,SAASvB,EAASrB,GAGd8D,cAFsBvC,eAASvB,cAAQuB,iBAET,SAASpD,OAC/B4F,EAAOvC,EAAO3C,SACdkF,EAAM,KACF9D,EAAamC,EAAcvD,MAC/BV,EAAMS,iBACNkF,EAAmB,CAAC9D,EAAM,UAAWC,GAAYH,UAAYiE,EAC7DD,QAKZ,SAAShC,EAAM9B,OACLgE,cAAgBzC,eAASvB,cAAQuB,cACjC1E,YAAgB0E,YAEtBN,OAAOvD,iBAAiB,QAAQ,WAC5BR,EAAK8G,EAAUnH,MAEnB8B,EAASqF,GAAU,SAAS7F,GACxBA,EAAMS,iBACN8D,EAAM7D,KAAMhC,MCpHpB,SAASoH,EAAWC,OACZhC,EAAMgC,EAAI/B,aAAa,OAEvB+B,EAAI1B,eAAiB,IACrB0B,EAAIzB,cAAgB,MACY,GAAhCP,EAAIiC,QAAQ,kBAEZjC,EAAMA,EACDsB,QAAQ,YAAa,WACrBA,QAAQ,YAAa,aACrBA,QAAQ,YAAa,aACrBA,QAAQ,gBAAiB,aAC9BU,EAAI1G,aAAa,MAAO0E,GACxBrE,YAAW,WACPqG,EAAIE,OAAS,WACTH,EAAWC,MAEhB,IACHrG,YAAW,WACPoG,EAAWC,KACZ,MAIX,SAASG,EAAYC,GFZjBzD,GAAM,GEaM,gBACc,IAAXyD,IACPA,EAAStH,SAASC,iBACd,kDAGH,IAAI4G,EAAIS,EAAOrG,OAAS,EAAG4F,GAAK,EAAGA,IACpCI,EAAWK,EAAOT,OChC9B/B,EAAM,WCAG,WCAH,aCAG,WJqCTb,OAAOvD,iBAAiB,QAAQ,WAC5B2G","file":"Main.js","sourcesContent":["const BASE_CLASS = 'jonnitto-prettyembed';\nconst INIT_CLASS = `${BASE_CLASS}--init`;\nconst PLAY_CLASS = `${BASE_CLASS}--play`;\nconst SLIM_CLASS = `${BASE_CLASS}--slim`;\nconst VIDEOS = document.querySelectorAll(\n    `.${BASE_CLASS}--video video:not([autoplay])`\n);\n\nfunction init(video) {\n    let classList = video.parentNode.classList;\n    if (classList.contains(INIT_CLASS)) {\n        return;\n    }\n\n    if (video.hasAttribute('data-controls')) {\n        video.setAttribute('controls', true);\n    }\n\n    if (!video.hasAttribute('controls')) {\n        classList.add(SLIM_CLASS);\n        video.addEventListener('click', () => {\n            let play = !classList.contains(PLAY_CLASS);\n            classList[play ? 'add' : 'remove'](PLAY_CLASS);\n            if (play) {\n                video.play();\n            } else {\n                video.pause();\n            }\n        });\n    }\n\n    classList.add(INIT_CLASS);\n    classList.add(PLAY_CLASS);\n    setTimeout(() => {\n        video.play();\n    }, 0);\n}\n\nfunction pause(videos = VIDEOS, current = null) {\n    for (let index = 0; index < videos.length; index++) {\n        const video = VIDEOS[index];\n        if (video != current) {\n            if (!video.hasAttribute('controls')) {\n                video.parentNode.classList.remove(PLAY_CLASS);\n            }\n            video.pause();\n        }\n    }\n}\n\nfor (let index = 0; index < VIDEOS.length; index++) {\n    VIDEOS[index].addEventListener('play', event => {\n        pause(VIDEOS, event.target);\n    });\n}\n\nexport { init, pause };\n","export default function(selector, callback) {\n    document.documentElement.addEventListener('click', event => {\n        let element = event.target.closest(selector);\n        if (!element || typeof callback != 'function') {\n            return;\n        }\n        callback.call(element, event);\n    });\n}\n","import { init } from './Init';\nimport addEvent from '../Helper/addEvent';\n\nconst SELECTOR =\n    '.jonnitto-prettyembed--video.jonnitto-prettyembed--inline video';\n\naddEvent(SELECTOR, function(event) {\n    event.preventDefault();\n    init(this);\n});\n","import addEvent from './addEvent';\n\nconst HTML_ELEMENT = document.documentElement;\nconst BODY_ELEMENT = document.body;\nconst BASE_CLASS = 'jonnitto-prettyembed';\nconst LIGHTBOX_CLASS = `${BASE_CLASS}__lightbox`;\nconst ID = LIGHTBOX_CLASS;\nconst VISIBLE_CLASS = `-${LIGHTBOX_CLASS}`;\nconst VISIBLE_CLASS_LIST = HTML_ELEMENT.classList;\nconst INNER_CLASS = `${BASE_CLASS}__inner`;\nconst CLOSE_CLASS = `${BASE_CLASS}__close`;\nconst CONTENT_CLASS = `${BASE_CLASS}__content`;\n\nlet lighboxContent = false;\nlet lighbox = document.createElement('div');\nlet timeout = null;\n\nlighbox.className = LIGHTBOX_CLASS;\nlighbox.innerHTML = `\n<div class=\"${INNER_CLASS}\">\n    <button type=\"button\" class=\"${CLOSE_CLASS}\">&times;</button>\n    <div id=\"${ID}\" class=\"${BASE_CLASS} ${CONTENT_CLASS}\"></div>\n</div>`;\n\nfunction resetContent() {\n    // Reset the content to the default class\n    lighboxContent.className = `${BASE_CLASS} ${CONTENT_CLASS}`;\n    // Clear all content\n    lighboxContent.innerHTML = '';\n}\n\nfunction get(type, paddingTop) {\n    if (!lighboxContent) {\n        BODY_ELEMENT.appendChild(lighbox);\n        lighboxContent = document.getElementById(ID);\n    }\n    resetContent();\n    if (typeof type != 'object') {\n        type = type ? [type] : [];\n    }\n    type.forEach(item => {\n        lighboxContent.classList.add(`${BASE_CLASS}--${item}`);\n    });\n\n    if (paddingTop) {\n        lighboxContent.style.paddingTop = paddingTop;\n    }\n    return lighboxContent;\n}\n\nfunction show(callback) {\n    clearTimeout(timeout);\n    timeout = setTimeout(function() {\n        if (typeof callback == 'function') {\n            callback();\n        }\n        VISIBLE_CLASS_LIST.add(VISIBLE_CLASS);\n    }, 100);\n}\n\nfunction closeLighbox() {\n    VISIBLE_CLASS_LIST.remove(VISIBLE_CLASS);\n    if (lighboxContent) {\n        clearTimeout(timeout);\n        timeout = setTimeout(resetContent, 300);\n    }\n}\n\nfunction closeLighboxOnESC(event) {\n    if (event.keyCode == 27) {\n        if (VISIBLE_CLASS_LIST.contains(VISIBLE_CLASS)) {\n            closeLighbox();\n        }\n    }\n}\n\nfunction init(selector, callback) {\n    if (typeof callback == 'function' && typeof selector == 'string') {\n        addEvent(selector, callback);\n    }\n}\n\n// Catch click event to prevent closing lightbox if some clicks on content\naddEvent(`.${CONTENT_CLASS}`, event => {\n    event.stopPropagation();\n});\n\n// Close lightbox on click on lightbox background or on close button\naddEvent(`.${LIGHTBOX_CLASS}`, closeLighbox);\naddEvent(`.${CLOSE_CLASS}`, closeLighbox);\n\n// Close on ESC\nHTML_ELEMENT.addEventListener('keyup', closeLighboxOnESC);\n\nexport { get, show, init };\n","import * as video from './Init';\nimport * as lightbox from '../Helper/Lightbox';\n\nconst BASE_CLASS = 'jonnitto-prettyembed';\nconst SELECTOR_CLASS = `.${BASE_CLASS}--video.${BASE_CLASS}--lightbox video`;\nlet timeout;\n\nlightbox.init(SELECTOR_CLASS, function(event) {\n    event.preventDefault();\n    clearTimeout(timeout);\n    video.pause();\n    let videoNode = lightbox.get('video').appendChild(this.cloneNode(true));\n    lightbox.show(() => {\n        video.init(videoNode);\n    });\n    timeout = setTimeout(function() {\n        // Make sure the videoNode start playing\n        videoNode.play();\n    }, 500);\n});\n","function check(autoplay = true, callback) {\n    const HAS_AUTOPLAY = !/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(\n        window.navigator.userAgent\n    );\n    if ((!HAS_AUTOPLAY && !autoplay) || (HAS_AUTOPLAY && autoplay)) {\n        if (typeof callback == 'function') {\n            callback();\n        }\n        return true;\n    }\n    return false;\n}\n\nfunction hasAutoplay(callback) {\n    check(true, callback);\n}\n\nfunction noAutoplay(callback) {\n    check(false, callback);\n}\n\nexport { hasAutoplay, noAutoplay };\n","import addEvent from './addEvent';\nimport { noAutoplay } from './checkAgent';\nimport * as lightboxHelper from '../Helper/Lightbox';\n\nconst BASE = 'jonnitto-prettyembed';\n\nfunction markup(node) {\n    let data = node.dataset;\n    let fullscreen = data.fs != null;\n    if (!data.embed) {\n        return false;\n    }\n\n    return `<iframe src=\"${data.embed}\" ${\n        fullscreen ? 'allowfullscreen ' : ''\n    }frameborder=\"0\" allow=\"${\n        fullscreen ? 'fullscreen; ' : ''\n    }accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"></iframe>`;\n}\n\nfunction replace(element, tagName) {\n    if (typeof element === 'object' && typeof tagName === 'string') {\n        let originalElement = element;\n        let originalTag = originalElement.tagName;\n        let startRX = new RegExp('^<' + originalTag, 'i');\n        let endRX = new RegExp(originalTag + '>$', 'i');\n        let startSubst = '<' + tagName;\n        let endSubst = tagName + '>';\n        let wrapper = document.createElement('div');\n        wrapper.innerHTML = originalElement.outerHTML\n            .replace(startRX, startSubst)\n            .replace(endRX, endSubst);\n        let newElement = wrapper.firstChild;\n        element.parentNode.replaceChild(newElement, element);\n        return newElement;\n    }\n}\n\nfunction getImage(node) {\n    let image = node.querySelector('img');\n    return {\n        node: image || null,\n        src: image ? image.getAttribute('src') : null\n    };\n}\n\nfunction getPaddingTop(node, fallback = '56.25%') {\n    // 56.25% is a 16:9 fallback\n    let image = getImage(node);\n    if (!image.node) {\n        return fallback;\n    }\n    let ratio =\n        (parseInt(image.node.naturalHeight) /\n            parseInt(image.node.naturalWidth)) *\n        100;\n    if (typeof ratio != 'number') {\n        return fallback;\n    }\n    return ratio + '%';\n}\n\nfunction write(link, playClass) {\n    let iframe = markup(link);\n    let image = getImage(link);\n    if (iframe && image.src) {\n        let element = replace(link, 'div');\n        element.setAttribute('data-img', image.src);\n        element.classList.add(playClass);\n        element.style.paddingTop = getPaddingTop(link);\n        element.innerHTML = iframe;\n    }\n}\n\nfunction restore(element, playClass) {\n    let img = element.getAttribute('data-img') || false;\n    if (img) {\n        element.classList.remove(playClass);\n        element.removeAttribute('style');\n        element.innerHTML = `<img src=\"${img}\" />`;\n        replace(element, 'a');\n    }\n}\n\nfunction init(selector, playClass, links) {\n    noAutoplay(() => {\n        if (!links) {\n            links = document.querySelectorAll(selector);\n        }\n        for (let i = links.length - 1; i >= 0; i--) {\n            write(links[i], playClass);\n        }\n    });\n}\n\nfunction lightbox(type) {\n    const SELECTOR = `a.${BASE}--${type}.${BASE}--lightbox`;\n\n    lightboxHelper.init(SELECTOR, function(event) {\n        let html = markup(this);\n        if (html) {\n            let paddingTop = getPaddingTop(this);\n            event.preventDefault();\n            lightboxHelper.get([type, 'iframe'], paddingTop).innerHTML = html;\n            lightboxHelper.show();\n        }\n    });\n}\n\nfunction embed(type) {\n    const SELECTOR = `a.${BASE}--${type}.${BASE}--inline`;\n    const PLAY_CLASS = `${BASE}--play`;\n\n    window.addEventListener('load', () => {\n        init(SELECTOR, PLAY_CLASS);\n    });\n    addEvent(SELECTOR, function(event) {\n        event.preventDefault();\n        write(this, PLAY_CLASS);\n    });\n}\n\nexport { markup, replace, write, restore, init, lightbox, embed };\n","import { hasAutoplay } from '../Helper/checkAgent';\n\nfunction fixPreview(img) {\n    let src = img.getAttribute('src');\n    if (\n        img.naturalHeight <= 90 &&\n        img.naturalWidth <= 120 &&\n        src.indexOf('/default.jpg') == -1\n    ) {\n        src = src\n            .replace('mqdefault', 'default')\n            .replace('hqdefault', 'mqdefault')\n            .replace('sddefault', 'hqdefault')\n            .replace('maxresdefault', 'sddefault');\n        img.setAttribute('src', src);\n        setTimeout(() => {\n            img.onload = () => {\n                fixPreview(img);\n            };\n        }, 10);\n        setTimeout(() => {\n            fixPreview(img);\n        }, 5000);\n    }\n}\n\nfunction fixPreviews(images) {\n    hasAutoplay(() => {\n        if (typeof images === 'undefined') {\n            images = document.querySelectorAll(\n                'img.jonnitto-prettyembed__youtube-preview'\n            );\n        }\n        for (let i = images.length - 1; i >= 0; i--) {\n            fixPreview(images[i]);\n        }\n    });\n}\n\nwindow.addEventListener('load', () => {\n    fixPreviews();\n});\n\nexport default fixPreviews;\n","import { embed } from '../Helper/iFrame';\n\nembed('vimeo');\n","import { lightbox } from '../Helper/iFrame';\n\nlightbox('vimeo');\n","import { embed } from '../Helper/iFrame';\n\nembed('youtube');\n","import { lightbox } from '../Helper/iFrame';\n\nlightbox('youtube');\n"]}